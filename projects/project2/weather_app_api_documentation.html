<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WeatherApp API Documentation</title>
    <style>
      main {max-width: 1000px; min-width: 700px }

      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background-color: rgb(240, 250, 250); 
        padding: 10px 60px 10px 60px;
      }

      h1 {
        color: #333;
      }

      .box {
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 15px;
        margin-bottom: 20px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      pre {
        background-color: #f7f7f7;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ddd;
        overflow-x: auto;
        font-size: 14px;
      }

      .copy-btn {
        background-color: #4CAF50;
        color: white;
        padding: 5px 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      .copy-btn:hover {
        background-color: #45a049;
      }

      .copy-btn:active {
        background-color: #388e3c;
      }

      #navbar {
        position: fixed;
        top: 0;
        left: 0;
        width: 200px;
        height: 100%;
        background-color: #333;
        color: white;
        padding-top: 20px;
        padding-left: 20px;
        z-index: 1000;
      }

      #navbar header h1 {
        font-size: 20px;
        margin-bottom: 20px;
      }

      #navbar a.nav-link {
        display: block;
        padding: 10px;
        text-decoration: none;
        color: white;
        margin-bottom: 10px;
      }

      #navbar a.nav-link:hover {
        background-color: #555;
      }

      #main-doc {
        margin-left: 220px;
        padding: 20px; 
      }

      @media (max-width: 768px) {
        #navbar {
          width: 100%;
          height: auto;
          position: fixed;
          top: 0;
          left: 0;
          padding: 10px;
        }

        #main-doc {
          margin-left: 0;
        }
      } 

      h2, h3 {text-decoration: underline}

      input[type=text] {
        width: 60%;
        padding: 8px;
        margin-bottom: 10px;
      }

      button {
        padding: 8px 12px;
        border-radius: 5px;
        border: none;
        cursor: pointer;
      }

      button:hover {
        background-color: #45a049;
        color: white;
      }

      #weatherResult {
        margin-top: 15px;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav id="navbar">
      <header>
        <h1>WeatherApp API Docs</h1>
      </header>
      <a href="#overview" class="nav-link">Overview</a>
      <a href="#authentication" class="nav-link">Authentication</a>
      <a href="#endpoints" class="nav-link">Endpoints & Demo</a>
      <a href="#error_handling" class="nav-link">Error Handling</a>
      <a href="#rate_limiting" class="nav-link">Rate Limiting</a>
      <a href="#best_practices" class="nav-link">Best Practices</a>
      <a href="#changelog" class="nav-link">Changelog</a>
    </nav>

    <!-- Main Documentation -->
    <main id="main-doc">
      <h1>WeatherApp API Documentation</h1>

      <!-- Overview -->
      <section class='main-section' id="overview">
        <header><h2>Overview</h2></header>
        <p>The <b>WeatherApp API</b> provides real-time weather data and forecasts for any location worldwide. You can access current conditions, hourly forecasts, and 7-day forecasts in JSON format.</p>
        <div class="box">
          <h3>Base URL:</h3>
          <pre id="base-url">https://api.weatherapp.com/v1</pre>
          <button class="copy-btn" onclick="copyText('base-url')">Copy Link</button>
        </div>
      </section>

      <!-- Authentication -->
      <section class='main-section' id="authentication">
        <header><h2>Authentication</h2></header>
        <p>To use the API, you need an <b>API Key</b>. Enter your API key in the input below for the demo:</p>
        <div class="box">
          <input type="text" id="apiKey" placeholder="Enter your API key here">
        </div>
      </section>

      <!-- Endpoints & Demo -->
      <section class='main-section' id="endpoints">
        <header><h2>Endpoints & Demo</h2></header>

        <div class="box">
          <h3>Get Current Weather</h3>
          <p>Enter a city and click <b>Fetch Weather</b>:</p>
          <input type="text" id="cityInput" placeholder="City name">
          <button onclick="fetchWeather()">Fetch Weather</button>
          <div id="weatherResult"></div>
        </div>
      </section>

      <!-- Error Handling -->
      <section class='main-section' id="error_handling">
        <header><h2>Error Handling</h2></header>
        <p>The API uses standard HTTP status codes to indicate success or failure:</p>
        <ul>
          <li><b>200 OK</b> – Request successful, response contains data.</li>
          <li><b>400 Bad Request</b> – Invalid or missing parameters.</li>
          <li><b>401 Unauthorized</b> – Invalid or expired API key.</li>
          <li><b>404 Not Found</b> – Location not found.</li>
          <li><b>429 Too Many Requests</b> – Rate limit exceeded.</li>
          <li><b>500 Internal Server Error</b> – Server encountered an error.</li>
        </ul>
      </section>

      <!-- Rate Limiting -->
      <section class='main-section' id="rate_limiting">
        <header><h2>Rate Limiting</h2></header>
        <p>Default rate limit: <b>60 requests per minute</b>. Plan your requests to avoid hitting the limit.</p>
      </section>

      <!-- Best Practices -->
      <section class='main-section' id="best_practices">
        <header><h2>Best Practices</h2></header>
        <ul>
          <li><b>Cache responses</b> to reduce repeated requests.</li>
          <li><b>Check HTTP codes</b> and handle errors gracefully.</li>
          <li><b>Validate user input</b> before making API calls.</li>
        </ul>
      </section>

      <!-- Changelog -->
      <section class='main-section' id="changelog">
        <header><h2>Changelog</h2></header>
        <ul>
          <li>v1.0 – Initial release with demo, current weather endpoint, and documentation.</li>
        </ul>
      </section>
    </main>

    <script>
      // Copy text function
      function copyText(elementId) {
        const text = document.getElementById(elementId).textContent;
        const textArea = document.createElement("textarea");
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand("copy");
        document.body.removeChild(textArea);
        alert("Text copied to clipboard!");
      }

      // Fetch weather demo
      async function fetchWeather() {
        const apiKey = document.getElementById("apiKey").value.trim();
        const city = document.getElementById("cityInput").value.trim();
        const resultDiv = document.getElementById("weatherResult");

        if (!apiKey) {
          resultDiv.innerHTML = "<span style='color:red;'>Please enter your API key.</span>";
          return;
        }
        if (!city) {
          resultDiv.innerHTML = "<span style='color:red;'>Please enter a city name.</span>";
          return;
        }

        resultDiv.innerHTML = "Loading...";

        try {
          const response = await fetch(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${city}`);

          if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            resultDiv.innerHTML = `<span style="color:red;">Error ${response.status}: ${errorData.error?.message || response.statusText}</span>`;
            return;
          }

          const data = await response.json();

          resultDiv.innerHTML = `
            <b>Location:</b> ${data.location.name}, ${data.location.country} <br>
            <b>Temperature:</b> ${data.current.temp_c}°C <br>
            <b>Condition:</b> ${data.current.condition.text} <br>
            <b>Humidity:</b> ${data.current.humidity}% <br>
            <b>Wind:</b> ${data.current.wind_kph} kph
          `;
        } catch (err) {
          resultDiv.innerHTML = `<span style="color:red;">Network or server error: ${err.message}</span>`;
        }
      }
    </script>
  </body>
</html>
